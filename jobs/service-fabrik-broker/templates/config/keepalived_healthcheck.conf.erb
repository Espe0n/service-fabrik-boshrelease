vrrp_script chk_sfnode {
    script "/etc/keepalived/getAgentStatus.sh"
    weight 10
    interval 2
    fall 2
    rise 2
}
vrrp_instance VI_1 {
    debug 2
    interface eth0 # interface to monitor
    <% if ( spec.bootstrap === TRUE ) %>
    state MASTER
    virtual_router_id 51 # Assign one ID for this route
    priority 101 # 101 on master, 100 on backup
    unicast_src_ip <%= spec.ip %> # My IP
    unicast_peer {
        10.11.252.11 # peer IP
    }
    <% else %>
    state BACKUP
    virtual_router_id 51 # Assign one ID for this route
    priority 100 # 101 on master, 100 on backup
    unicast_src_ip <%= spec.ip %> # My IP
    unicast_peer {
        10.11.252.10 # peer IP
    }
    <% end %>     
    track_script {
        chk_sfnode
    }
    notify_master /etc/keepalived/master.sh
}
